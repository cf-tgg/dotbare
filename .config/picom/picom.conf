shadow = true;
shadow-radius = 20;
shadow-opacity = 0.45;
shadow-offset-x = 33;
shadow-offset-y = 24;
shadow-color = "#000000";

frame-opacity = 0.92;
frame-opacity-for-same-colors = true;

corner-radius = 12;

blur-background = true;
blur-background-frame = true;

blur-method = "dual_kawase";
blur-kern = "5x5box";
blur-strength = 2;

backend = "glx"
dithered-present = false;
vsync = true;

detect-client-opacity = true;
detect-transient = true;
detect-client-leader = true;
detect-round-corners = true;

use-damage = true;
xrender-sync-fence = true;
log-level = "warn";

rules = ({
    match = "WM_CLASS = 'mpvk' || WM_CLASS = 'emacs'";
    opacity = 1.0;
    blur-background = false;
    blur-background-frame = false;
    frame-opacity = 1.0;
}, {
   match = "WM_CLASS = 'dwm'";
   opacity = 0.95;
   frame-opacity = 0.95;
   blur-kern = "3x3box";
   blur-opacity = 0.97;
   blur-background = true;
   blur-background-fixed = true;
   blur-strength = 15;
   corner-radius = 1;
   shadow = false;
}, {
    match = "(_NET_WM_STATE@[0] = '_NET_WM_STATE_FULLSCREEN' || _NET_WM_STATE@[1] = '_NET_WM_STATE_FULLSCREEN' || _NET_WM_STATE@[0] = '_NET_WM_STATE_MAXIMIZED_VERT' || _NET_WM_STATE@[1] = '_NET_WM_STATE_MAXIMIZED_VERT' || _NET_WM_STATE@[0] = '_NET_WM_STATE_MAXIMIZED_HORZ' || _NET_WM_STATE@[1] = '_NET_WM_STATE_MAXIMIZED_HORZ')";
    shadow = false;
    corner-radius = 0;
    blur-background = false;
    }, {
    match = "WM_TRANSIENT_FOR@";
    animations = ({
        triggers = ["open", "show"];
        opacity = {
            curve = "linear";
            duration = 0.12;
            delay = 0.03;
            start = "window-raw-opacity-before";
            end = "window-raw-opacity";
        };
        blur-opacity = "opacity";
        shadow-opacity = "opacity";
        scale-y = {
            curve = "cubic-bezier(0.24, 0.64, 0.79, 0.96)";
            duration = 0.12;
            delay = 0.03;
            start = "window-raw-opacity-before";
            end = "window-raw-opacity";
        };
        offset-y = "(-window-height/2) + (window-height/2) * scale-y";
        shadow-scale-y = "scale-y";
        shadow-offset-y = "offset-y";
    },{
        triggers = ["close", "hide"];
        opacity = {
            curve = "linear";
            duration = 0.12;
            delay = 0.06;
            start = "window-raw-opacity-before";
            end = 0.35;
        };
        shadow-opacity = "opacity";
        scale-y = {
            curve = "cubic-bezier(0.22, 0.02, 0.76, 0.36)";
            duration = 0.12;
            start = 1;
            end = 0.45;
        };
        offset-y = "(-window-height/2) + (window-height/2) * scale-y";
        shadow-scale-y = "scale-y";
        shadow-offset-y = "offset-y";
    });
}, {
    match = "window_type = 'dropdown_menu' || window_type = 'popup_menu' || window_type = 'menu'";
    opacity = 0.85;
    animations = ({
        triggers = ["open", "show"];
        opacity = {
            curve = "linear";
            duration = 0.12;
            start = "window-raw-opacity-before";
            end = "window-raw-opacity";
        };
        blur-opacity = {
            curve = "linear";
            duration = 0.12;
            start = 0;
            end = 0.45;
        };
        scale-y = {
            curve = "cubic-bezier(0.22, 1, 0.36, 0.99)";
            duration = 0.12;
            start = 0.69;
            end = 1;
        };
        frame-opacity = 0.25;
        blur-opacity = 0.35;
        shadow-opacity = "opacity";
        shadow-scale-y = "scale-y";
        }, {
        triggers = ["close", "hide"];
        opacity = {
            curve = "linear";
            duration = 0.12;
            start = "window-raw-opacity-before";
            end = 0;
        };
        blur-opacity = 0;
        shadow-opacity = "opacity";
        scale-y = {
            curve = "cubic-bezier(0.21, 0.02, 0.76, 0.36)";
            duration = 0.12;
            start = 1;
            end = 0.7;
        };
        shadow-scale-y = "scale-y";
    });
}, {
    match = "window_type = 'dropdown_menu' || window_type = 'popup_menu' || window_type = 'menu'";
    opacity = 0.9;
}, {
    match = "window_type = 'dock' || window_type = 'desktop'";
    blur-background = false;
    corner-radius = 0;
}, {
    match = "window_type = 'notification'";
    opacity = 0.9;
    shadow = false;
});

animations = ({
    triggers = ["close", "hide"];
    opacity = {
        curve = "linear";
        duration = 0.12;
        start = "window-raw-opacity-before";
        end = "window-raw-opacity";
    };
    blur-opacity = {
        curve = "linear";
        duration = 0.12;
        delay = 0.03;
        start = 0;
        end = 0.3;
    };
    shadow-opacity = "opacity";
    offset-x = "(1 - scale-x) / 2 * window-width";
    offset-y = "(1 - scale-y) / 2 * window-height * 5";
    scale-x = {
        curve = "cubic-bezier(0.21, 0.02, 0.76, 0.36)";
        duration = 0.12;
        start = 1;
        end = 0.65;
    };
    scale-y = "scale-x";
    shadow-scale-x = "scale-x";
    shadow-scale-y = "scale-y";
    shadow-offset-x = "offset-x";
    shadow-offset-y = "offset-y";
}, {
    triggers = ["open", "show"];
    opacity = {
        curve = "linear";
        duration = 0.12;
        start = "window-raw-opacity-before";
        end = "window-raw-opacity";
    };
    blur-opacity = {
        curve = "linear";
        duration = 0.12;
        delay = 0.03;
        start = "window-raw-opacity-before";
        end = "window-raw-opacity";
    };
    shadow-opacity = "opacity";
    offset-x = "(1 - scale-x) / 2 * window-width";
    offset-y = "(1 - scale-y) / 2 * window-height * 5";
    scale-x = {
        curve = "cubic-bezier(0.24, 0.64, 0.79, 0.98)";
        duration = 0.12;
        start = 0.45;
        end = 1;
    };
    scale-y = "scale-x";
    shadow-scale-x = "scale-x";
    shadow-scale-y = "scale-y";
    shadow-offset-x = "offset-x";
    shadow-offset-y = "offset-y";
},

# Half Window Size Desktop Switch
{
    triggers = ["workspace-out"];
    offset-y = {
        curve = "cubic-bezier(0.21, 0.02, 0.76, 0.36)";
        duration = 0.15;
        start = "0";
        end = "- window-height / 2";
    };
    shadow-offset-y = "offset-y";
    opacity = {
        curve = "linear";
        duration = 0.15;
        start = "window-raw-opacity-before";
        end = "window-raw-opacity";
    };
    blur-opacity = "0";
    shadow-opacity = "opacity";
}, {
    triggers = ["workspace-out-inverse"];
    offset-y = {
        curve = "cubic-bezier(0.21, 0.02, 0.76, 0.36)";
        duration = 0.12;
        delay = 0.03;
        start = 0;
        end = "window-height / 2";
    };
    shadow-offset-y = "offset-y";
    opacity = {
        curve = "linear";
        duration = 0.15;
        start = "window-raw-opacity-before";
        end = "window-raw-opacity";
    };
    shadow-opacity = "opacity";
}, {
    triggers = ["workspace-in"];
    offset-y = {
        curve = "cubic-bezier(0.24, 0.64, 0.79, 0.98)";
        duration = 0.12;
        delay = 0.03;
        start = "window-height / 2";
        end = 0;
    };
    shadow-offset-y = "offset-y";
    opacity = {
        curve = "linear";
        duration = 0.12;
        start = 0;
        end = "window-raw-opacity";
    };
    blur-opacity = {
        curve = "linear";
        duration = 0.12;
        start = 0;
        end = "window-raw-opacity";
    };
    shadow-opacity = "opacity";
}, {
    triggers = ["workspace-in-inverse"];
    offset-y = {
        curve = "cubic-bezier(0.24, 0.64, 0.76, 0.36)";
        duration = 0.12;
        start = "- window-height / 2";
        end = 0;
    };
    shadow-offset-y = "offset-y";
    opacity = {
        curve = "linear";
        duration = 0.12;
        delay = 0.06;
        start = 0;
        end = "window-raw-opacity";
    };
    blur-opacity = {
        curve = "linear";
        duration = 0.12;
        delay = 0.03;
        start = 0;
        end = "window-raw-opacity";
    };
    shadow-opacity = "opacity";
}, {
    triggers = [ "geometry" ];
    preset = "geometry-change";
});
